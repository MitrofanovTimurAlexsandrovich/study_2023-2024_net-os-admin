---
## Author
author:
  name: Митрофанов Тимур Александрович
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: kulyabov-ds@rudn.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: "Лабораторная работа № 10"
subtitle: "Расширенные настройки SMTP-сервера"
license: CC BY
date: today
date-format: "YYYY-MM-DD" # Example: 2025-09-06
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Митрофанов Тимур Александрович
  * Российский университет дружбы народов им. П. Лумумбы


:::
::: {.column width="30%"}


:::
::::::::::::::



# Вводная часть

## Цель работы

Приобретение практических навыков по конфигурированию SMTP-сервера в части настройки аутентификации.

## Задание

1. Настройте Dovecot для работы с LMTP.
2. Настройте аутентификацию посредством SASL на SMTP-сервере.
3. Настройте работу SMTP-сервера поверх TLS.
4. Скорректируйте скрипт для Vagrant, фиксирующий действия расширенной настройки SMTP-сервера во внутреннем окружении виртуальной машины server 

# Выполнение лабораторной работы

## Переход в режим суперпользователя на сервере

![Переход в режим суперпользователя на сервере](image/1.png)

## Запуск мониторинга логов почтовой службы

![Запуск мониторинга логов почтовой службы](image/2.png)

## Активация протокола LMTP в основном конфиге Dovecot

![Активация протокола LMTP в основном конфиге Dovecot](image/3.png)

## Настройка LMTP сокета для взаимодействия с почтовым агентом

![Настройка LMTP сокета для взаимодействия с почтовым агентом](image/4.png)

## Переопределение транспорта доставки в настройках Postfix

![Переопределение транспорта доставки в настройках Postfix](image/5.png)

## Изменение формата имени пользователя для аутентификации

![Изменение формата имени пользователя для аутентификации](image/6.png)

## Перезапуск почтовых служб для применения настроек

![Перезапуск почтовых служб для применения настроек](image/7.png)

## Подтверждение успешной доставки почты в системных логах

![Подтверждение успешной доставки почты в системных логах](image/8.png)

## Просмотр полученного тестового письма в почтовом ящике

![Просмотр полученного тестового письма в почтовом ящике](image/9.png)

## Конфигурирование службы аутентификации SASL в Dovecot

![Конфигурирование службы аутентификации SASL в Dovecot](image/10.png)

## Связывание Postfix с механизмом аутентификации Dovecot

![Связывание Postfix с механизмом аутентификации Dovecot](image/11.png)

## Настройка политик безопасности и ограничений для получателей

![Настройка политик безопасности и ограничений для получателей](image/12.png)

## Ограничение списка доверенных сетей в параметрах Postfix

![Ограничение списка доверенных сетей в параметрах Postfix](image/13.png)

## Редактирование параметров SMTP сервиса в файле master.cf

![Редактирование параметров SMTP сервиса в файле master.cf](image/14.png)

## Перезагрузка служб после настройки механизмов безопасности

![Перезагрузка служб после настройки механизмов безопасности](image/15.png)

## Установка утилиты telnet на клиентской машине

![Установка утилиты telnet на клиентской машине](image/16.png)

## Генерация строки аутентификации в формате base64

![Генерация строки аутентификации в формате base64](image/17.png)

## Имитация процесса аутентификации через telnet сессию

![Имитация процесса аутентификации через telnet сессию](image/18.png)

## Получение подтверждения успешной авторизации от сервера

![Получение подтверждения успешной авторизации от сервера](image/19.png)

## Копирование сертификатов для настройки шифрования TLS

![Копирование сертификатов для настройки шифрования TLS](image/20.png)

## Конфигурирование параметров TLS шифрования в Postfix

![Конфигурирование параметров TLS шифрования в Postfix](image/21.png)

## Настройка правил межсетевого экрана для нового порта

![Настройка правил межсетевого экрана для нового порта](image/22.png)

## Финальный перезапуск Postfix после настройки TLS

![Финальный перезапуск Postfix после настройки TLS](image/23.png)

## Проверка защищенного TLS соединения через openssl

![Проверка защищенного TLS соединения через openssl](image/24.png)

## Копирование конфигураций в каталог автоматизации Vagrant

![Копирование конфигураций в каталог автоматизации Vagrant](image/25.png)

## Обновление скрипта автоматической настройки сервера

![Обновление скрипта автоматической настройки сервера](image/26.png)

## Редактирование скрипта инициализации клиентской машины

![Редактирование скрипта инициализации клиентской машины](image/27.png)

# Заключение

## Вывод

В ходе выполнения лабораторной работы я приобрёл практические навыки по конфигурированию SMTP-сервера в части настройки аутентификации.
